import"./vendor.d4751c75.js";const l=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}};l();class m extends Phaser.Physics.Arcade.Sprite{constructor(e){let s=e.ship.x,i=e.ship.y-16;super(e,s,i,"bullet");e.add.existing(this),e.physics.add.existing(this),e.anims.create({key:"bulletAnim",frames:this.anims.generateFrameNumbers("bullet",{frames:[0,1]}),frameRate:20,repeat:-1}),this.setVelocityY(-250),e.projectiles.add(this)}update(...e){this.y<0&&this.destroy()}}class d extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i){let t="enemy"+Phaser.Math.Between(1,3);super(e,s,i,t);e.add.existing(this),e.physics.add.existing(this),e.anims.create({key:"rocket"+t,frames:this.anims.generateFrameNumbers(t,{frames:[0,1]}),frameRate:20,repeat:-1}),this.setCollideWorldBounds(!0),this.setBounce(1),this.setVelocity(Phaser.Math.Between(-200,200),Phaser.Math.Between(-200,200)),this.anims.play({key:"rocket"+t})}}class p extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i){super(e,s,i,"explosion");e.add.existing(this),e.physics.add.existing(this),e.anims.create({key:"explosion",frames:this.anims.generateFrameNumbers("explosion",{start:0,end:4}),frameRate:20,hideOnComplete:!0}),this.anims.play({key:"explosion"})}}class c extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i){super(e,s,i,"ship");e.add.existing(this),e.physics.add.existing(this),e.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("ship",{frames:[2,7]}),frameRate:20,repeat:-1}),e.anims.create({key:"right",frames:this.anims.generateFrameNumbers("ship",{frames:[4,9]}),frameRate:20}),e.anims.create({key:"left",frames:this.anims.generateFrameNumbers("ship",{frames:[0,5]}),frameRate:20}),this.setCollideWorldBounds(!0)}}class y extends Phaser.Scene{constructor(){super({key:"MainScene"})}create(){let s=this.add.image(this.cameras.main.width/2,0,"fond");this.tweens.add({targets:s,y:304,duration:5e3,repeat:-1,ease:Phaser.Math.Easing.Linear});let i=this.add.bitmapText(5,5,"pixelFont","0");this.KeyLeft=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT),this.KeyRight=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT),this.KeyShoot=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.ship=new c(this,this.cameras.main.width/2,this.cameras.main.height),this.enemies=this.add.group();for(let n=0;n<4;n++)this.enemies.add(new d(this,Phaser.Math.Between(100,200),4));let t=()=>{this.scene.start("GameOverScene",{score:this.score})};this.physics.add.collider(this.ship,this.enemies,t);let a=()=>{this.enemies.add(new d(this,Phaser.Math.Between(100,200),4))},h=(n,o)=>{n.destroy(),o.destroy(),new p(this,o.x,o.y),this.score++,i.setText(this.score.toString()),this.time.addEvent({delay:Phaser.Math.Between(1e3,3e3),callback:a})};this.projectiles=this.add.group(),this.physics.add.overlap(this.projectiles,this.enemies,h),this.lastTime=0,this.score=0}update(e){this.ship.body.velocity.x=0,this.ship.playAfterRepeat("idle"),this.KeyLeft.isDown&&(this.ship.anims.getName()!=="left"&&this.ship.play("left"),this.ship.body.velocity.x=-200),this.KeyRight.isDown&&(this.ship.anims.getName()!=="right"&&this.ship.play("right"),this.ship.body.velocity.x=200),this.KeyShoot.isDown&&e-this.lastTime>=300&&(new m(this),this.lastTime=e);for(var s=0;s<this.projectiles.getChildren().length;s++)this.projectiles.getChildren()[s].update()}}class u extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("fond","assets/desert-backgorund-looped.png"),this.load.spritesheet("bullet","assets/laser-bolts.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("ship","assets/ship.png",{frameWidth:16,frameHeight:24}),this.load.spritesheet("enemy1","assets/enemy-small.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("enemy2","assets/enemy-medium.png",{frameWidth:32,frameHeight:16}),this.load.spritesheet("enemy3","assets/enemy-big.png",{frameWidth:32,frameHeight:32}),this.load.bitmapFont("pixelFont","assets/font/font.png","assets/font/font.xml"),this.load.spritesheet("explosion","assets/explosion.png",{frameWidth:16,frameHeight:16})}create(){this.scene.start("MainScene")}}class f extends Phaser.Scene{constructor(){super({key:"GameOverScene"})}create(e){this.add.bitmapText(this.cameras.main.width/2,this.cameras.main.height/2,"pixelFont","GAME OVER").setOrigin().setScale(2),this.add.bitmapText(this.cameras.main.width/2,this.cameras.main.height/2+15,"pixelFont","press enter to restart").setOrigin(),this.add.bitmapText(this.cameras.main.width/2,this.cameras.main.height/2+50,"pixelFont","Your score : "+e.score).setOrigin(),this.KeyEnter=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER)}update(){this.KeyEnter.isDown&&this.scene.start("MainScene")}}const g=256,x=192,b={type:Phaser.AUTO,backgroundColor:"#000000",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:g,height:x},scene:[u,y,f],physics:{default:"arcade",arcade:{}},pixelArt:!0};window.addEventListener("load",()=>{new Phaser.Game(b)});
